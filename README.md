# Lyrics Book

自用歌词本。

## 来源

- 歌词主要来源为萌娘百科，少量来自原曲简介、Lrclib等。
- 翻译主要来源为萌娘百科，其余情况将在索引页进行标注。

## 项目结构

歌词源文件在`src`目录下，通过脚本构建至`docs`目录。
相关脚本在`scripts`目录下，其中`convert_photrans.py`用于处理萌娘百科（MediaWiki）的注音语法为自定义语法；`preprocess.py`用于从`src`构建至`docs`目录。

## 语法约定

本项目在`Material for MkDocs`的基础上维护了一些简单易读的语法，示例如下。

### 有无翻译

```markdown
---
title: 歌曲名
---

原文1

原文2

---

原文3
```

```markdown
---
title: 歌曲名
translated: true
---

原文1
译文1

原文2
译文2

---

原文3
译文3

```

### 注音

```markdown
待注音文字（注音）原文原文

原文原文 待注音文字（注音）
```

### 视频

```markdown
---
title: 歌曲名
video: 视频链接
---

原文

```

### 详细规则

- 通过头部元数据判断标识是否有翻译。若有，将通过标签页语法生成有无翻译两版。
- 不同语句之间用空行隔开；不同段落之间用分隔符`---`隔开。若有翻译，则原文和译文之间无需添加空行。
- 注音通过全角括号`（）`，即中日文括号隔开。待注音文字前用空格和其余文字分隔。若位于句首则无需额外添加空格。
- 如果元数据`video`有值，将在标题后正文前插入对应视频。

## 贡献

歌词路径为：`src/作者/歌曲名.md`。歌词文件内部语法参见上节语法约定。

添加新作者后，需要新建`src/作者/index.md`作为索引页，同时在`src/catalog.md`中添加目录索引。具体格式可以参照已有内容。

添加新歌词后，需要编辑`src/作者/index.md`和`mkdocs.yml`的`nav`配置，添加目录索引和导航。具体格式可以参照已有内容。
